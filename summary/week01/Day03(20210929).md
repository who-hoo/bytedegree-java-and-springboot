# Chapter 03. 연산자

교육 과정에서 제공되는 강의 자료(동영상)을 보면서 부족한 내용은 **남궁성님의 Java의 정석 3판**을 추가적으로 읽으며 학습하였습니다.

---

## 연산자(operator)

- 연산자(operator) : 연산을 수행하는 기호
- 피연산자(operand) : 연산자의 연산 수행 대상
- 식(expression) : 연산자와 피연산자를 조합하여 계산하고자하는 바를 표현하는 것
- 평가(evaluation) : 식을 계산하여 결과를 얻는 것
- 연산자의 종류
  - 산술 연산자(`+`, `-`, `*`, `/`, `%`, `<<`, `>>`) : 사칙연산과 나머지 연산
  - 비교 연산자(`>`, `<`, `>=`, `<=`, `==`, `!=`) : 크고 작음과 같고 다름을 비교
  - 논리 연산자(`&&`, `||`, `!`, `&`, `|`, `^`, `~`) : '그리고(AND)'와 '또는(OR)'으로 조건을 연결
  - 대입 연산자(`=`) : 우변의 값을 좌변에 저장
  - 기타(`(type)`, `? :`, `instanceof`) : 형변환 연산자, 삼항 연산자, instanceof연산자
- 연산자의 우선순위 : 식에 사용된 연산자가 둘 이상인 경우, 어떤 연산을 먼저 수행할지 자동 결정하는 것
  1. 산술 > 비교 > 논리 > 대입. 대입은 제일 마지막에 수행
  2. 단항 > 이항 > 삼항. 단항 연산자의 우선순위가 이항 연산자보다 높다.
  3. 단항 연산자와 대입 연산자를 제외한 모든 연산의 진행방향은 왼쪽→오른쪽
- 산술 변환(usual arithmetic conversion) : 연산 전에 피연산자 타입의 일치를 위해 자동 형변환되는 것
  1. 두 피연산자의 타입을 같게 일치시킨다. (보다 큰 타입으로 일치)
  2. 피연산자의 타입이 `int` 보다 작은 타입이면 `int` 로 변환된다.
  3. 연산 결과의 타입은 피연산자의 타입과 일치(`5 / 2 = 2`)

## 단항 연산자

- 증감 연산자
  - 증가 연산자(`++`) : 피연산자의 값을 1 증가시킨다.
  - 감소 연산자(`—-`) : 피연산자의 값을 1 감소시킨다.
  - 전위형(prefix) : 값이 참조되기 **전에** 증가/감소 시킨다. `++i` 증가 후에 참조하여 대입
  - 후위형(postfix) : 값이 참조된 **후에** 증가/감소 시킨다. `i++` 참조하여 대입 후에 증가
- 부호 연산자
  - `-` : 피연산자의 부호를 반대로 변경
  - `+` : 아무런 일도 하지 않는다.
- 형변환 연산자 : `(type)`

## 산술 연산자

- 사칙 연산자(`+`, `-`, `*`, `/`)
  - 피연산자가 정수형인 경우, 나누는 수로 `0` 을 사용할 수 없다.
  - 나누기 연산자의 두 피연산자가 모두 `int` 타입인 경우, 연산 결과도 `int` 타입이다. 이 때, 반올림은 발생하지 않는다(소수점 이하는 버려진다).
- 나머지 연산자(`%`)
  - 오른쪽 피연산자로 나누고 남은 나머지를 반환
  - 피연산자는 정수만 허용하며 부호는 무시된다. 나누는 수로 `0`을 사용할 수 없다.

## 비교 연산자

- 문자열 비교에는 `==` 대신 `equals()` 를 사용
- 대소문자를 구별하지 않고 비교하고 싶으면 `equalsIgnoreCase()` 사용

## 논리 연산자

- `||` (OR 결합, 논리 합) : 피연산자 중 어느 한 쪽이 `true` 이면 `true` 반환
- `&&` (AND 결합, 논리 곱) : 피연산자 양쪽 모두 `true` 여야 `true` 반환
- `!` (NOT, 부정) : 피연산자가 `true` 이면 `false` 를, `false` 이면 `true` 를 반환
- 논리 연산자는 효율적인 연산(short circuit evaluation, 단락 회로 평가)을 수행한다.

  - OR 연산의 경우, 어느 한쪽만 참이여도 전체 연산결과가 참이므로 좌측 피연산자가 참이면, 우측 피연산자의 값은 평가하지 않는다.
  - AND 연산의 경우, 어느 한쪽만 거짓이여도 전체 연산결과가 거짓이므로 좌측 피연산자가 거짓이면, 우측 피연산자의 값은 평가하지 않는다.

  → 같은 조건식이라도 피연산자의 위치에 따라서 연산속도가 달라질 수 있다. OR 연산의 경우에는 연산결과가 '참'일 확률이 높은 피연산자를, AND 연산의 경우에는 연산결과가 '거짓'일 확률이 높은 피연산자를 연산자의 왼쪽에 놓아야 더 빠른 연산결과를 얻을 수 있다.

## 비트 연산자

- `|` (OR) : 피연산자 중 한쪽의 값이 1이면 1을 결과로 얻고 그 외에는 0을 얻는다.
  - 주로 특정 비트의 값을 변경할 때 사용
- `&` (AND) : 피연산자 중 양쪽의 값이 1이어야만 1을 결과로 얻고 그 외에는 0을 얻는다.
  - 주로 특정 비트의 값을 뽑아낼 때 사용
- `^` (XOR) : 피연산자의 값이 서로 다를 때만 1을 결과로 얻고 같을 때는 0을 얻는다.
  - 간단한 암호화에 사용(같은 값으로 두고 XOR연산을 수행하면 원래의 값으로 돌아오는 특징)
- `~` : 비트 전환 연산자. 피연산자를 2진수로 표현했을 때 0을 1로, 1은 0으로 바꾼다. (`!` 과 유사)
  - 부호있는 타입의 피연산자는 부호가 반대로 변경되므로 `1의 보수` 를 얻을 수 있다.
- `>>`, `<<` : 쉬프트(shift) 연산자. 피연산자를 2진수로 표현했을 때 각 자리를 오른쪽(>>) 또는 왼쪽(<<)으로 이동 시킨다. 자리이동으로 저장범위를 벗어난 값들은 버려지고 빈자리는 0으로 채워진다.
  - `<<` 연산자의 경우 자리이동으로 저장범위를 벗어난 값들은 버려지고 빈자리는 0으로 채워진다.
    → x << n은 $x * 2^n$의 결과와 같다.
  - `>>` 연산자의 경우 부오있는 정수는 부호를 유지하기 위해 왼쪽 피연산자가 음수인 경우, 빈자리를 1로 채운다.
    → x >> n은 $x / 2^n$의 결과와 같다.
  - `>>>` 연산자의 경우 채워지는 비트가 부호와 상관 없이 0이다.

## 조건 연산자

- `? :` : 유일한 삼항 연산자로, 조건식의 결과에 따라 연산 결과를 달리한다.
- `조건식 ? 식1 : 식2` : 조건식이 참이면 식1을 거짓이면 식2를 반환한다.

## 대입 연산자

- `=` : 대입 연산자
  - 오른쪽 피연산자를 왼쪽 피연산자에 저장 후, 저장된 값을 반환한다.
  - 왼쪽 피연산자를 `lvalue` (left value), 오른쪽 피연산자를 `rvalue` (right value)라고 한다.
  - 우선 순위가 가장 낮다.
- `op=` : 복합 대입 연산자.
  - 대입 연산자는 다른 연산자(op)와 결합하여 하나로 축약하여 `op=` 와 같은 방식으로 사용될 수 있다.
  - 결합된 두 연산자는 반드시 공백없이 붙여 써야 한다.
  - ex) `i = i + 1` → `i += 1`

---

## Reference

남궁성, 『Java의 정석 3판』, 도우출판(2016), p86-133(Chapter 03 - 변수 operator).
