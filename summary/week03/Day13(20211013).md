# Chapter 07. 상속과 다형성 - 2.다형성

교육 과정에서 제공되는 강의 자료(동영상)을 보면서 부족한 내용은 **남궁성님의 Java의 정석 3판**을 추가적으로 읽으며 학습하였습니다.

---

## 다형성(polymorphism)

```java
class Tv {
	boolean power;
	int channel;

	void power() { power = !power; }
	void channelUp() { ++channel; }
	void channelDown() { --channel; }
}

class SmartTv extends Tv {
	String text;

	void caption() { }
}

SmartTv s = new SmartTv(); // 참조 변수와 인스턴스의 타입이 일치
Tv t = new SmartTv(); // 참조 변수와 인스턴스의 타입이 불일치.
                      // 조상 타입(Tv) 참조변수 t로 자손 타입(SmartTv) 객체 생성
```

- 하나의 코드가 여러 자료형으로 구현되어 실행되는 것. 같은 코드에서 여러 실행결과가 나옴
- 여러 가지 형태를 가질 수 있는 능력 → 조상 타입의 참조 변수로 자손 타입의 인스턴스를 참조
- 자손 타입의 참조변수로 조상 타입의 인스턴스를 참조할 수는 없다.
- 참조변수의 타입 → 참조변수가 참조하고 있는 인스턴스에서 사용할 수 있는 멤버의 개수를 결정!
- 참조변수의 형변환 → 사용할 수 있는 멤버의 범위(개수)를 조절하는 것
  - 상속(조상-자손)관계의 참조변수는 서로 형변환 가능
  - 상위 클래스로는 형변환 생략 가능 - 묵시적 형변환 : Up-casting
  - 하위 클래스로는 형변환 생략 불가 - 명시적 형변환 : Down-casting
  - 참조변수의 타입을 변환하는 것이지 인스턴스를 변환하는 것은 아니기 때문에, 인스턴스에 아무런 영향을 미치지 않는다.
  - 멤버변수가 조상 클래스와 자손 클래스에 중복으로 정의된 경우, 조상타입의 참조변수를 사용했을 때는 조상 클래스에 선언된 멤버 변수가 사용되고, 자손타입의 참조변수를 사용했을 때는 자손 클래스에 선언된 멤버변수가 사용된다.  
    → 인스턴스변수에 직접 접근하면, 참조변수의 타입에 따라 사용되는 인스턴스 변수가 달라질 수 있으므로 주의
- `instanceof` 연산자
  - 참조변수의 형변환 가능여부 확인에 사용. 가능하면 `true` 반환
  - 형변환 전에 반드시 `insteadof`로 확인해야 함
- 다형성의 장점
  1. 다형적 매개변수
     - 참조형 매개변수는 메서드 호출시, **자신과 같은 타입 또는 자손타입의 인스턴스**를 넘겨줄 수 있다.
       → 하나의 매개변수로 여러 타입을 받는 것이 가능해진다.
  2. 하나의 배열로 여러종류의 객체 다루기 가능
     - 조상타입의 참조변수 배열을 사용하면, 공통의 조상을 가진 서로 다른 종류의 객체를 배열로 묶어서 다룰 수 있다.
     - 묶어서 다루고싶은 객체들의 상속관계를 따져서 가장 가까운 공통조상 클래스 타입의 참조변수 배열을 생성해서 객체들을 저장

---

## Reference

남궁성, 『Java의 정석 3판』, 도우출판(2016), p354-374(Chapter 07 - 객체지향 프로그래밍 II 中 5.다형성).
